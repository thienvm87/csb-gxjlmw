(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(59)},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(3),o=n.n(a),c=n(22),r=n.n(c),s=n(25),i=n(23),l=n(24),d=n(11),u=n(27),m=n(26),p=n(13),v=n.n(p),f=(n(58),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).addSIPEventListener=function(e,t){Object.keys(Object(d.a)(a)).filter(function(t){return t.startsWith(e)}).map(function(t){return t.replace("".concat(e,"_"),"")}).forEach(function(n){t.on(n,function(t){a["".concat(e,"_").concat(n)](t)})})},a.sipUA_newRTCSession=function(e){var t=e.session,n=e.session.connection,o=e.originator;a.addSIPEventListener("rtcSession",t),a.setState({rtcSession:t}),"local"===o&&a.addRemoteStream(n)},a.rtcSession_peerconnection=function(e){var t=e.peerconnection;a.addRemoteStream(t)},a.call=function(){var e=a.state.sipUA;console.log(e),e.call("sip:0961166133",{mediaConstraints:{audio:!0,video:!1},sessionTimersExpires:120})},a.addRemoteStream=function(e){var t=e.getRemoteStreams(),n=Object(s.a)(t,1)[0];n&&a.handleRemoteStream(n),e.addEventListener("addstream",function(e){a.handleRemoteStream(e.stream)})},a.handleRemoteStream=function(e){var t=a.phone.current;t.srcObject=e,e.addEventListener("addtrack",function(n){console.log('remote track "addtrack" event',n);var a=n.track;t.srcObject===e&&(t.srcObject=e,a.addEventListener("ended",function(){console.log('remote track "ended" event [track:%o]',a)}))}),e.addEventListener("removetrack",function(n){console.log('remote track "removetrack" event',n),t.srcObject===e&&(t.srcObject=e)})},a.phone=o.a.createRef(),a.state={sipUA:null,rtcSession:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e={sockets:[new v.a.WebSocketInterface("wss://cloudpbx.nextcrm.vn:8089/ws")],uri:"sip:810@cloudpbx.nextcrm.vn",password:"aha2RpbqKSbskDn7KmLS",contact_uri:"sip:122@cloudpbx.nextcrm.vn;transport=wss",session_timers:!0},t=new v.a.UA(e);this.addSIPEventListener("sipUA",t),this.setState({sipUA:t}),t.start()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"Hello CodeSandbox"),o.a.createElement("h2",null,"Start editing to see some magic happen!"),o.a.createElement("button",{onClick:this.call},"Call"),o.a.createElement("audio",{ref:this.phone,autoPlay:!0}))}}]),n}(o.a.PureComponent)),S=document.getElementById("root");r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),S)}},[[28,1,2]]]);
//# sourceMappingURL=main.91f3d808.chunk.js.map